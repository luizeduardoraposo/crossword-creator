# crossword-creator

Small Node.js scripts to:
- Analyze letter frequencies (A–Z) from a Portuguese word list (`words-ptbr.txt`)
- Sample words and try to pack them into an N×N grid (word-search style)
- Generate NxN “boggle” matrices using the 12 most frequent letters

No external dependencies. CommonJS modules (`require`/`module.exports`).

## Requirements
- Node.js (any modern version; scripts use only standard Node APIs)
- Windows examples use PowerShell/cmd, but it works on any OS

## Structure
- `words-ptbr.txt` — Word list (UTF‑8, one per line; may include diacritics)
- `script-calc-freq.js` — Computes A–Z frequencies from the word list
- `letter-freq.js` — Generated by `script-calc-freq.js` (do not edit by hand)
- `script.js` — `drawRandomWords()` samples 300 words from the list
- `wordgrid-bruteforce.js` — Brute-force placer that tries to pack words into an N×N grid
- `matrix.js` — Generates NxN (boggle-like) matrices from the 12 most frequent letters
- `matrix4x4.js`, `matrix5x5.js`, ... — Per-size accumulator files created on demand

## Quick start (CLI)

Frequencies (A–Z) from `words-ptbr.txt`:

```powershell
# Print sorted frequencies
node script-calc-freq.js

# Generate/update letter-freq.js
node script-calc-freq.js --save
```

Generate and save boggle matrices (NxN) from the top 12 letters:

```powershell
# Print 2 matrices 4×4 (do not save)
node matrix.js --count 2 --size 4 --print

# Save 4 matrices 5×5 to matrix5x5.js (incremental append)
node matrix.js --count 4 --size 5 --save

# Save 97 matrices 4×4 to matrix4x4.js (silent)
node matrix.js --count 97 --size 4 --save

# Save to a custom file (bypass size-based routing)
node matrix.js --count 3 --size 5 --save --out matrix.custom.js
```

Run the word-grid brute force (default N = 4):

```powershell
node wordgrid-bruteforce.js
```

## API (in code)

Frequencies:

```js
const { calcularFrequenciaLetras, salvarResultadoComoObjetoJS } = require('./script-calc-freq');
const freq = calcularFrequenciaLetras('words-ptbr.txt');
// salvarResultadoComoObjetoJS('words-ptbr.txt'); // writes letter-freq.js
```

Word sampling:

```js
const { drawRandomWords } = require('./script');
const words = drawRandomWords(); // 300 unique words
```

Brute-force packing:

```js
const { findBestPlacement } = require('./wordgrid-bruteforce');
const res = findBestPlacement(['CASA', 'RUA', 'SOL'], 4, { maxTimeMs: 10000 });
// res = { grid, insertedWords, stats: { count, attempts, timeMs, cutoffReached } }
```

Matrix generation (boggle):

```js
const { sortedLetters, getTopLetters12, createMatrixBoggle, generateMatrices } = require('./matrix');
console.log(sortedLetters); // 12 most frequent letters (as in letter-freq.js)
const m = createMatrixBoggle(4); // 16 letters (4x4), letters may repeat
const { matrices } = generateMatrices(3, 5); // three 5x5 matrices
```

## Per-size matrix file format

Each size file (e.g., `matrix4x4.js`, `matrix5x5.js`) is an accumulator that exports a single `MATRICES` object:

```js
// Header (auto-generated)
const MATRICES = {};
module.exports = MATRICES;

// Entries appended over time
MATRICES['matrix4x4-1'] = ['A', 'B', 'C', /* ... 16 letters ... */];
MATRICES['matrix4x4-2'] = ['A', 'B', 'C', /* ... */];
// ...
```

- Naming convention: `matrix{S}x{S}-{k}` (e.g., `matrix5x5-12`).
- Next index `{k}` is computed by scanning the file; the script always appends and never overwrites existing entries.

## Notes and gotchas
- `letter-freq.js` is generated; to refresh, run `node script-calc-freq.js --save`.
- `script.js` uses `totalLines = 245300` hard‑coded (0‑based). If `words-ptbr.txt` changes, update this constant.
- `wordgrid-bruteforce.js` has a simple heuristic (`canFit`) and some minor duplication (e.g., directions); keep the exported API stable.
- Scripts use synchronous file I/O for simplicity; if you optimize/stream, preserve output shapes and side effects.
- Boggle matrices are flat arrays of length `size*size`, uppercase letters, possibly repeated; sampling is uniform over the top 12 letters (uses `crypto.randomInt` when available).

## Development
No `package.json`; run scripts directly with `node`. For simple automation, for example:

```powershell
# Example: generate 100 4x4 matrices daily
node matrix.js --count 100 --size 4 --save
```

Feel free to open issues/improvements (e.g., CLI flags for the brute-force runner, progress logging, VS Code tasks, etc.).

## Examples

AI prompt example:

> Show the command to generate and append 97 4x4 matrices to matrix4x4.js (no printing). Reply with only the command.

Command example:

```powershell
node matrix.js --count 900 --size 4 --save
```
